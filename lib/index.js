"use strict";

var _slice = Array.prototype.slice;
var _applyConstructor = function (Constructor, args) {
  var instance = Object.create(Constructor.prototype);

  var result = Constructor.apply(instance, args);

  return result != null && (typeof result == "object" || typeof result == "function") ? result : instance;
};

var _toArray = function (arr) {
  return Array.isArray(arr) ? arr : Array.from(arr);
};

exports.generateTree = generateTree;
exports.generate = generate;
var isValid = require("shift-validator")["default"];
var Shift = require("shift-ast");

var codeGen = require("shift-codegen")["default"];


var identifierStart = "_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
var identifierPart = identifierStart + "0123456789";

var MANY_BOUND = 5;
var MAX_IDENT_LENGTH = 15;
var MAX_STRING_LENGTH = 3;

var R = (function () {
  var R = function R(rng) {
    this.rng = rng;
  };

  R.prototype.nextBoolean = function () {
    return this.rng() * 2 > 1;
  };

  R.prototype.nextInt = function (bound) {
    return Math.floor(this.rng() * bound);
  };

  R.prototype.nextDouble = function () {
    return this.rng();
  };

  return R;
})();

function e(gen1, gen2) {
  return function (rng, depth) {
    return rng.nextBoolean() ? gen1(rng, depth) : gen2(rng, depth);
  };
}


function ap(f) {
  var g1 = _slice.call(arguments, 1);

  return function (rng, depth) {
    return _applyConstructor(f, _toArray((g1.map(function (g) {
      return g(rng, depth - 1);
    }))));
  };
}

function manyB(bound, gen) {
  return function (rng, depth) {
    if (depth <= 0) {
      return [];
    }
    var number = rng.nextInt(bound);
    var result = [];
    for (var i = 0; i < number; i++) {
      result.push(gen(rng, depth));
    }
    return result;
  };
}

function many(gen) {
  return manyB(MANY_BOUND, gen);
}

function many1(gen) {
  return function (rng, depth) {
    return manyB(MANY_BOUND - 1, gen)(rng, depth).push(gen(rng, depth));
  };
}

function op(gen) {
  return function (rng, depth) {
    return depth <= 0 || rng.nextBoolean() ? null : gen(rng, depth);
  };
}

function choice() {
  var arr = _slice.call(arguments);

  return function (rng, depth) {
    return arr[rng.nextInt(arr.length)];
  };
}

function among() {
  var arr = _slice.call(arguments);

  return function (rng, depth) {
    var n = rng.nextInt(arr.length);
    return arr[n](rng, depth);
  };
}

var genString = function (rng, depth) {
  var length = rng.nextInt(MAX_STRING_LENGTH);
  return Array.apply([], new Array(length)).map(function () {
    return String.fromCharCode(rng.nextInt(127 - 20) + 20);
  }).join("");
};

var genIdentifierString = function (rng, depth) {
  var result = "";
  result += identifierStart[rng.nextInt(identifierStart.length)];
  var length = rng.nextInt(MAX_IDENT_LENGTH);
  for (var i = 0; i < length; i++) {
    result += identifierPart[rng.nextInt(identifierPart.length)];
  }
  return result.toString();
};

function map(f1, f2) {
  return function () {
    var args = _slice.call(arguments);

    return f2(f1.apply(null, _toArray(args)));
  };
}

var genRegExpString = map(genIdentifierString, (function (s) {
  return "/" + s + "/";
}));
var genNumber = function (rng, depth) {
  return Math.exp(rng.nextDouble());
};
var genFunctionBody = ap(Shift.FunctionBody, many(genDirective), many(genStatement));
var genIdentifier = ap(Shift.Identifier, genIdentifierString);
var genPropertyNameString = ap(Shift.PropertyName, function () {
  return "string";
}, genString);
var genPropertyNameIdent = ap(Shift.PropertyName, function () {
  return "identifier";
}, map(genIdentifier, function (x) {
  return x.name;
}));
var genPropertyNameNumber = ap(Shift.PropertyName, function () {
  return "number";
}, map(genNumber, function (x) {
  return x.toString();
}));
var genPropertyName = among(genPropertyNameString, genPropertyNameIdent, genPropertyNameNumber);
var genDataProperty = ap(Shift.DataProperty, genPropertyName, genExpression);
var genGetter = ap(Shift.Getter, genPropertyName, genFunctionBody);
var genSetter = ap(Shift.Setter, genPropertyName, genIdentifier, genFunctionBody);
var genObjectProperty = among(genDataProperty, genGetter, genSetter);
var genBlock = ap(Shift.Block, many(genStatement));
var genVariableDeclarator = ap(Shift.VariableDeclarator, genIdentifier, op(genExpression));
var genVariableDeclaration = ap(Shift.VariableDeclaration, choice("let", "var"), many1(genVariableDeclarator));
var genSwitchCase = ap(Shift.SwitchCase, genExpression, many(genStatement));
var genSwitchDefault = ap(Shift.SwitchDefault, many(genStatement));
var genCatchClause = ap(Shift.CatchClause, genIdentifier, genBlock);
var genUnknownDirective = ap(Shift.UnknownDirective, genString);
var genUseStrictDirective = ap(Shift.UseStrictDirective);
var genArrayExpression = ap(Shift.ArrayExpression, many(op(genExpression)));
var genAssignmentExpression = ap(Shift.AssignmentExpression, choice("=", "+=", "-=", "*=", "/=", "%=", "<<=", ">>=", ">>>=", "|=", "^=", "&="), genExpression, genExpression);
var genBinaryExpression = ap(Shift.BinaryExpression, choice("==", "!=", "===", "!==", "<", "<=", ">", ">=", "in", "instanceof", "<<", ">>", ">>>", "+", "-", "*", "/", "%", ",", "||", "&&", "|", "^", "&"), genExpression, genExpression);
var genCallExpression = ap(Shift.CallExpression, genExpression, many(genExpression));
var genComputedMemberExpression = ap(Shift.ComputedMemberExpression, genExpression, genExpression);
var genConditionalExpression = ap(Shift.ConditionalExpression, genExpression, genExpression, genExpression);
var genFunctionExpression = ap(Shift.FunctionExpression, op(genIdentifier), many(genIdentifier), genFunctionBody);
var genIdentifierExpression = ap(Shift.IdentifierExpression, genIdentifier);
var genLiteralBooleanExpression = ap(Shift.LiteralBooleanExpression, choice(true, false));
var genLiteralNullExpression = ap(Shift.LiteralNullExpression);
var genLiteralNumericExpression = ap(Shift.LiteralNumericExpression, genNumber);
var genLiteralInfinityExpression = ap(Shift.LiteralInfinityExpression);
var genLiteralRegExpExpression = ap(Shift.LiteralRegExpExpression, genRegExpString);
var genLiteralStringExpression = ap(Shift.LiteralStringExpression, genString);
var genNewExpression = ap(Shift.NewExpression, genExpression, many(genExpression));
var genObjectExpression = ap(Shift.ObjectExpression, many(genObjectProperty));
var genPostfixExpression = ap(Shift.PostfixExpression, genExpression, choice("++", "--"));
var genPrefixExpression = ap(Shift.PrefixExpression, choice("+", "-", "!", "~", "typeof", "void", "delete", "++", "--"), genExpression);
var genStaticMemberExpression = ap(Shift.StaticMemberExpression, genExpression, genIdentifier);
var genThisExpression = ap(Shift.ThisExpression);
var genBlockStatement = ap(Shift.BlockStatement, genBlock);
var genDebuggerStatement = ap(Shift.DebuggerStatement);
var genDoWhileStatement = ap(Shift.DoWhileStatement, genStatement, genExpression);
var genEmptyStatement = ap(Shift.EmptyStatement);
var genExpressionStatement = ap(Shift.ExpressionStatement, genExpression);
var genForInStatement = ap(Shift.ForInStatement, e(genVariableDeclaration, genExpression), genExpression, genStatement);
var genForStatement = ap(Shift.ForStatement, op(e(genVariableDeclaration, genExpression)), op(genExpression), op(genExpression), genStatement);
var genFunctionDeclaration = ap(Shift.FunctionDeclaration, genIdentifier, many(genIdentifier), genFunctionBody);
var genIfStatement = ap(Shift.IfStatement, genExpression, genStatement, op(genStatement));
var genSwitchStatement = ap(Shift.SwitchStatement, genExpression, many(genSwitchCase));
var genSwitchStatementWithDefault = ap(Shift.SwitchStatementWithDefault, genExpression, many(genSwitchCase), genSwitchDefault, many(genSwitchCase));
var genThrowStatement = ap(Shift.ThrowStatement, genExpression);
var genTryCatchStatement = ap(Shift.TryCatchStatement, genBlock, genCatchClause);
var genTryFinallyStatement = ap(Shift.TryFinallyStatement, genBlock, op(genCatchClause), genBlock);
var genVariableDeclarationStatement = ap(Shift.VariableDeclarationStatement, genVariableDeclaration);
var genWhileStatement = ap(Shift.WhileStatement, genExpression, genStatement);
var genWithStatement = ap(Shift.WithStatement, genExpression, genStatement);
var genScript = ap(Shift.Script, genFunctionBody);
var genExpressionList = among(genArrayExpression, genAssignmentExpression, genBinaryExpression, genCallExpression, genComputedMemberExpression, genConditionalExpression, genFunctionExpression, genIdentifierExpression, genLiteralBooleanExpression, genLiteralNullExpression, genLiteralNumericExpression, genLiteralInfinityExpression, genLiteralRegExpExpression, genLiteralStringExpression, genNewExpression, genObjectExpression, genPostfixExpression, genPrefixExpression, genStaticMemberExpression, genThisExpression);
var genZeroLengthExpressionList = among(genArrayExpression, genIdentifierExpression, genLiteralBooleanExpression, genLiteralNullExpression, genLiteralNumericExpression, genLiteralInfinityExpression, genLiteralRegExpExpression, genLiteralStringExpression, genThisExpression);
var genDirectiveList = among(genUnknownDirective, genUseStrictDirective);
var genStatementList = among(genBlockStatement, genDebuggerStatement, genDoWhileStatement, genEmptyStatement, genExpressionStatement, genForInStatement, genForStatement, genFunctionDeclaration, genIfStatement, genSwitchStatement, genSwitchStatementWithDefault, genThrowStatement, genTryCatchStatement, genTryFinallyStatement, genVariableDeclarationStatement, genWhileStatement, genWithStatement);

function genExpression(random, depth) {
  return (depth <= 0 ? genZeroLengthExpressionList : genExpressionList)(random, depth);
}

function genDirective(random, depth) {
  return genDirectiveList(random, depth);
}

function genStatement(random, depth) {
  return genStatementList(random, depth);
}

function generateTree(rng, depth) {
  var r = new R(rng);
  do {
    var tree = genScript(r, depth);
    if (isValid(tree)) {
      return tree;
    }
  } while (true);
}

function generate(rng, depth) {
  return codeGen(generateTree(rng, depth));
}
//# sourceMappingURL=data:application/json;base64,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LENBQUMsQ0FBQztBQUNuQixLQUFHO0FBQ0QsUUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMvQixRQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUNqQixhQUFPLElBQUksQ0FBQztLQUNiO0dBQ0YsUUFBUSxJQUFJLEVBQUU7Q0FDaEI7O0FBRU0sU0FBUyxRQUFRLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUNuQyxTQUFPLE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7Q0FDMUMiLCJmaWxlIjoic3JjL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNCBTaGFwZSBTZWN1cml0eSwgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIilcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBpc1ZhbGlkIGZyb20gXCJzaGlmdC12YWxpZGF0b3JcIjtcbmltcG9ydCAqIGFzIFNoaWZ0IGZyb20gXCJzaGlmdC1hc3RcIjtcbmltcG9ydCBjb2RlR2VuIGZyb20gXCJzaGlmdC1jb2RlZ2VuXCI7XG5cbmxldCBpZGVudGlmaWVyU3RhcnQgPSBcIl8kYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwiO1xubGV0IGlkZW50aWZpZXJQYXJ0ID0gaWRlbnRpZmllclN0YXJ0ICsgXCIwMTIzNDU2Nzg5XCI7XG5cbmxldCBNQU5ZX0JPVU5EID0gNTtcbmxldCBNQVhfSURFTlRfTEVOR1RIID0gMTU7XG5sZXQgTUFYX1NUUklOR19MRU5HVEggPSAzO1xuXG5jbGFzcyBSIHtcbiAgY29uc3RydWN0b3Iocm5nKSB7XG4gICAgdGhpcy5ybmcgPSBybmc7XG4gIH1cblxuICBuZXh0Qm9vbGVhbigpIHtcbiAgICByZXR1cm4gdGhpcy5ybmcoKSAqIDIgPiAxO1xuICB9XG5cbiAgbmV4dEludChib3VuZCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMucm5nKCkgKiBib3VuZCk7XG4gIH1cblxuICBuZXh0RG91YmxlKCkge1xuICAgIHJldHVybiB0aGlzLnJuZygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGUoZ2VuMSwgZ2VuMikge1xuICByZXR1cm4gKHJuZywgZGVwdGgpID0+IHJuZy5uZXh0Qm9vbGVhbigpID9cbiAgICBnZW4xKHJuZywgZGVwdGgpIDpcbiAgICBnZW4yKHJuZywgZGVwdGgpO1xufVxuXG5cbmZ1bmN0aW9uIGFwKGYsIC4uLmcxKSB7XG4gIHJldHVybiAocm5nLCBkZXB0aCkgPT4gbmV3IGYoLi4uKGcxLm1hcChnPT5nKHJuZywgZGVwdGggLSAxKSkpKTtcbn1cblxuZnVuY3Rpb24gbWFueUIoYm91bmQsIGdlbikge1xuICByZXR1cm4gKHJuZywgZGVwdGgpID0+IHtcbiAgICBpZiAoZGVwdGggPD0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBsZXQgbnVtYmVyID0gcm5nLm5leHRJbnQoYm91bmQpO1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlcjsgaSsrKSB7XG4gICAgICByZXN1bHQucHVzaChnZW4ocm5nLCBkZXB0aCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG5mdW5jdGlvbiBtYW55KGdlbikge1xuICByZXR1cm4gbWFueUIoTUFOWV9CT1VORCwgZ2VuKTtcbn1cblxuZnVuY3Rpb24gbWFueTEoZ2VuKSB7XG4gIHJldHVybiAocm5nLCBkZXB0aCkgPT5cbiAgICBtYW55QihNQU5ZX0JPVU5EIC0gMSwgZ2VuKShybmcsIGRlcHRoKS5wdXNoKGdlbihybmcsIGRlcHRoKSk7XG59XG5cbmZ1bmN0aW9uIG9wKGdlbikge1xuICByZXR1cm4gKHJuZywgZGVwdGgpID0+IGRlcHRoIDw9IDAgfHwgcm5nLm5leHRCb29sZWFuKCkgPyBudWxsIDogZ2VuKHJuZywgZGVwdGgpO1xufVxuXG5mdW5jdGlvbiBjaG9pY2UoLi4uYXJyKSB7XG4gIHJldHVybiAocm5nLCBkZXB0aCkgPT4gYXJyW3JuZy5uZXh0SW50KGFyci5sZW5ndGgpXTtcbn1cblxuZnVuY3Rpb24gYW1vbmcoLi4uYXJyKSB7XG4gIHJldHVybiAocm5nLCBkZXB0aCkgPT4ge1xuICAgIGxldCBuID0gcm5nLm5leHRJbnQoYXJyLmxlbmd0aCk7XG4gICAgcmV0dXJuIGFycltuXShybmcsIGRlcHRoKTtcbiAgfVxufVxuXG5sZXQgZ2VuU3RyaW5nID0gKHJuZywgZGVwdGgpID0+IHtcbiAgbGV0IGxlbmd0aCA9IHJuZy5uZXh0SW50KE1BWF9TVFJJTkdfTEVOR1RIKTtcbiAgcmV0dXJuIEFycmF5LmFwcGx5KFtdLCBuZXcgQXJyYXkobGVuZ3RoKSkubWFwKCgpPT5TdHJpbmcuZnJvbUNoYXJDb2RlKHJuZy5uZXh0SW50KDEyNyAtIDIwKSArIDIwKSkuam9pbignJyk7XG59O1xuXG5sZXQgZ2VuSWRlbnRpZmllclN0cmluZyA9IChybmcsIGRlcHRoKSA9PiB7XG4gIGxldCByZXN1bHQgPSBcIlwiO1xuICByZXN1bHQgKz0gaWRlbnRpZmllclN0YXJ0W3JuZy5uZXh0SW50KGlkZW50aWZpZXJTdGFydC5sZW5ndGgpXTtcbiAgbGV0IGxlbmd0aCA9IHJuZy5uZXh0SW50KE1BWF9JREVOVF9MRU5HVEgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgcmVzdWx0ICs9IGlkZW50aWZpZXJQYXJ0W3JuZy5uZXh0SW50KGlkZW50aWZpZXJQYXJ0Lmxlbmd0aCldO1xuICB9XG4gIHJldHVybiByZXN1bHQudG9TdHJpbmcoKTtcbn07XG5cbmZ1bmN0aW9uIG1hcChmMSwgZjIpIHtcbiAgcmV0dXJuICguLi5hcmdzKSA9PiBmMihmMSguLi5hcmdzKSk7XG59XG5cbmxldCBnZW5SZWdFeHBTdHJpbmcgPVxuICBtYXAoZ2VuSWRlbnRpZmllclN0cmluZywgKHMgPT4gXCIvXCIgKyBzICsgXCIvXCIpKTtcbmxldCBnZW5OdW1iZXIgPVxuICAocm5nLCBkZXB0aCkgPT4gTWF0aC5leHAocm5nLm5leHREb3VibGUoKSk7XG5sZXQgZ2VuRnVuY3Rpb25Cb2R5ID1cbiAgYXAoU2hpZnQuRnVuY3Rpb25Cb2R5LCBtYW55KGdlbkRpcmVjdGl2ZSksIG1hbnkoZ2VuU3RhdGVtZW50KSk7XG5sZXQgZ2VuSWRlbnRpZmllciA9XG4gIGFwKFNoaWZ0LklkZW50aWZpZXIsIGdlbklkZW50aWZpZXJTdHJpbmcpO1xubGV0IGdlblByb3BlcnR5TmFtZVN0cmluZyA9XG4gIGFwKFNoaWZ0LlByb3BlcnR5TmFtZSwgKCkgPT4gXCJzdHJpbmdcIiwgZ2VuU3RyaW5nKTtcbmxldCBnZW5Qcm9wZXJ0eU5hbWVJZGVudCA9XG4gIGFwKFNoaWZ0LlByb3BlcnR5TmFtZSwgKCkgPT4gXCJpZGVudGlmaWVyXCIsIG1hcChnZW5JZGVudGlmaWVyLCB4ID0+IHgubmFtZSkpO1xubGV0IGdlblByb3BlcnR5TmFtZU51bWJlciA9XG4gIGFwKFNoaWZ0LlByb3BlcnR5TmFtZSwgKCkgPT4gXCJudW1iZXJcIiwgbWFwKGdlbk51bWJlciwgeCA9PiB4LnRvU3RyaW5nKCkpKTtcbmxldCBnZW5Qcm9wZXJ0eU5hbWUgPVxuICBhbW9uZyhnZW5Qcm9wZXJ0eU5hbWVTdHJpbmcsIGdlblByb3BlcnR5TmFtZUlkZW50LCBnZW5Qcm9wZXJ0eU5hbWVOdW1iZXIpO1xubGV0IGdlbkRhdGFQcm9wZXJ0eSA9XG4gIGFwKFNoaWZ0LkRhdGFQcm9wZXJ0eSwgZ2VuUHJvcGVydHlOYW1lLCBnZW5FeHByZXNzaW9uKTtcbmxldCBnZW5HZXR0ZXIgPVxuICBhcChTaGlmdC5HZXR0ZXIsIGdlblByb3BlcnR5TmFtZSwgZ2VuRnVuY3Rpb25Cb2R5KTtcbmxldCBnZW5TZXR0ZXIgPVxuICBhcChTaGlmdC5TZXR0ZXIsIGdlblByb3BlcnR5TmFtZSwgZ2VuSWRlbnRpZmllciwgZ2VuRnVuY3Rpb25Cb2R5KTtcbmxldCBnZW5PYmplY3RQcm9wZXJ0eSA9XG4gIGFtb25nKGdlbkRhdGFQcm9wZXJ0eSwgZ2VuR2V0dGVyLCBnZW5TZXR0ZXIpO1xubGV0IGdlbkJsb2NrID1cbiAgYXAoU2hpZnQuQmxvY2ssIG1hbnkoZ2VuU3RhdGVtZW50KSk7XG5sZXQgZ2VuVmFyaWFibGVEZWNsYXJhdG9yID1cbiAgYXAoU2hpZnQuVmFyaWFibGVEZWNsYXJhdG9yLCBnZW5JZGVudGlmaWVyLCBvcChnZW5FeHByZXNzaW9uKSk7XG5sZXQgZ2VuVmFyaWFibGVEZWNsYXJhdGlvbiA9XG4gIGFwKFNoaWZ0LlZhcmlhYmxlRGVjbGFyYXRpb24sIGNob2ljZShcImxldFwiLCBcInZhclwiKSwgbWFueTEoZ2VuVmFyaWFibGVEZWNsYXJhdG9yKSk7XG5sZXQgZ2VuU3dpdGNoQ2FzZSA9XG4gIGFwKFNoaWZ0LlN3aXRjaENhc2UsIGdlbkV4cHJlc3Npb24sIG1hbnkoZ2VuU3RhdGVtZW50KSk7XG5sZXQgZ2VuU3dpdGNoRGVmYXVsdCA9XG4gIGFwKFNoaWZ0LlN3aXRjaERlZmF1bHQsIG1hbnkoZ2VuU3RhdGVtZW50KSk7XG5sZXQgZ2VuQ2F0Y2hDbGF1c2UgPVxuICBhcChTaGlmdC5DYXRjaENsYXVzZSwgZ2VuSWRlbnRpZmllciwgZ2VuQmxvY2spO1xubGV0IGdlblVua25vd25EaXJlY3RpdmUgPVxuICBhcChTaGlmdC5Vbmtub3duRGlyZWN0aXZlLCBnZW5TdHJpbmcpO1xubGV0IGdlblVzZVN0cmljdERpcmVjdGl2ZSA9XG4gIGFwKFNoaWZ0LlVzZVN0cmljdERpcmVjdGl2ZSk7XG5sZXQgZ2VuQXJyYXlFeHByZXNzaW9uID1cbiAgYXAoU2hpZnQuQXJyYXlFeHByZXNzaW9uLCBtYW55KG9wKGdlbkV4cHJlc3Npb24pKSk7XG5sZXQgZ2VuQXNzaWdubWVudEV4cHJlc3Npb24gPVxuICBhcChTaGlmdC5Bc3NpZ25tZW50RXhwcmVzc2lvbiwgY2hvaWNlKFwiPVwiLCBcIis9XCIsIFwiLT1cIiwgXCIqPVwiLCBcIi89XCIsIFwiJT1cIiwgXCI8PD1cIiwgXCI+Pj1cIiwgXCI+Pj49XCIsIFwifD1cIiwgXCJePVwiLCBcIiY9XCIpLCBnZW5FeHByZXNzaW9uLCBnZW5FeHByZXNzaW9uKTtcbmxldCBnZW5CaW5hcnlFeHByZXNzaW9uID1cbiAgYXAoU2hpZnQuQmluYXJ5RXhwcmVzc2lvbiwgY2hvaWNlKFwiPT1cIiwgXCIhPVwiLCBcIj09PVwiLCBcIiE9PVwiLCBcIjxcIiwgXCI8PVwiLCBcIj5cIiwgXCI+PVwiLCBcImluXCIsIFwiaW5zdGFuY2VvZlwiLCBcIjw8XCIsIFwiPj5cIiwgXCI+Pj5cIiwgXCIrXCIsIFwiLVwiLCBcIipcIiwgXCIvXCIsIFwiJVwiLCBcIixcIiwgXCJ8fFwiLCBcIiYmXCIsIFwifFwiLCBcIl5cIiwgXCImXCIpLCBnZW5FeHByZXNzaW9uLCBnZW5FeHByZXNzaW9uKTtcbmxldCBnZW5DYWxsRXhwcmVzc2lvbiA9XG4gIGFwKFNoaWZ0LkNhbGxFeHByZXNzaW9uLCBnZW5FeHByZXNzaW9uLCBtYW55KGdlbkV4cHJlc3Npb24pKTtcbmxldCBnZW5Db21wdXRlZE1lbWJlckV4cHJlc3Npb24gPVxuICBhcChTaGlmdC5Db21wdXRlZE1lbWJlckV4cHJlc3Npb24sIGdlbkV4cHJlc3Npb24sIGdlbkV4cHJlc3Npb24pO1xubGV0IGdlbkNvbmRpdGlvbmFsRXhwcmVzc2lvbiA9XG4gIGFwKFNoaWZ0LkNvbmRpdGlvbmFsRXhwcmVzc2lvbiwgZ2VuRXhwcmVzc2lvbiwgZ2VuRXhwcmVzc2lvbiwgZ2VuRXhwcmVzc2lvbik7XG5sZXQgZ2VuRnVuY3Rpb25FeHByZXNzaW9uID1cbiAgYXAoU2hpZnQuRnVuY3Rpb25FeHByZXNzaW9uLCBvcChnZW5JZGVudGlmaWVyKSwgbWFueShnZW5JZGVudGlmaWVyKSwgZ2VuRnVuY3Rpb25Cb2R5KTtcbmxldCBnZW5JZGVudGlmaWVyRXhwcmVzc2lvbiA9XG4gIGFwKFNoaWZ0LklkZW50aWZpZXJFeHByZXNzaW9uLCBnZW5JZGVudGlmaWVyKTtcbmxldCBnZW5MaXRlcmFsQm9vbGVhbkV4cHJlc3Npb24gPVxuICBhcChTaGlmdC5MaXRlcmFsQm9vbGVhbkV4cHJlc3Npb24sIGNob2ljZSh0cnVlLCBmYWxzZSkpO1xubGV0IGdlbkxpdGVyYWxOdWxsRXhwcmVzc2lvbiA9XG4gIGFwKFNoaWZ0LkxpdGVyYWxOdWxsRXhwcmVzc2lvbik7XG5sZXQgZ2VuTGl0ZXJhbE51bWVyaWNFeHByZXNzaW9uID1cbiAgYXAoU2hpZnQuTGl0ZXJhbE51bWVyaWNFeHByZXNzaW9uLCBnZW5OdW1iZXIpO1xubGV0IGdlbkxpdGVyYWxJbmZpbml0eUV4cHJlc3Npb24gPVxuICBhcChTaGlmdC5MaXRlcmFsSW5maW5pdHlFeHByZXNzaW9uKTtcbmxldCBnZW5MaXRlcmFsUmVnRXhwRXhwcmVzc2lvbiA9XG4gIGFwKFNoaWZ0LkxpdGVyYWxSZWdFeHBFeHByZXNzaW9uLCBnZW5SZWdFeHBTdHJpbmcpO1xubGV0IGdlbkxpdGVyYWxTdHJpbmdFeHByZXNzaW9uID1cbiAgYXAoU2hpZnQuTGl0ZXJhbFN0cmluZ0V4cHJlc3Npb24sIGdlblN0cmluZyk7XG5sZXQgZ2VuTmV3RXhwcmVzc2lvbiA9XG4gIGFwKFNoaWZ0Lk5ld0V4cHJlc3Npb24sIGdlbkV4cHJlc3Npb24sIG1hbnkoZ2VuRXhwcmVzc2lvbikpO1xubGV0IGdlbk9iamVjdEV4cHJlc3Npb24gPVxuICBhcChTaGlmdC5PYmplY3RFeHByZXNzaW9uLCBtYW55KGdlbk9iamVjdFByb3BlcnR5KSk7XG5sZXQgZ2VuUG9zdGZpeEV4cHJlc3Npb24gPVxuICBhcChTaGlmdC5Qb3N0Zml4RXhwcmVzc2lvbiwgZ2VuRXhwcmVzc2lvbiwgY2hvaWNlKFwiKytcIiwgXCItLVwiKSk7XG5sZXQgZ2VuUHJlZml4RXhwcmVzc2lvbiA9XG4gIGFwKFNoaWZ0LlByZWZpeEV4cHJlc3Npb24sIGNob2ljZShcIitcIiwgXCItXCIsIFwiIVwiLCBcIn5cIiwgXCJ0eXBlb2ZcIiwgXCJ2b2lkXCIsIFwiZGVsZXRlXCIsIFwiKytcIiwgXCItLVwiKSwgZ2VuRXhwcmVzc2lvbik7XG5sZXQgZ2VuU3RhdGljTWVtYmVyRXhwcmVzc2lvbiA9XG4gIGFwKFNoaWZ0LlN0YXRpY01lbWJlckV4cHJlc3Npb24sIGdlbkV4cHJlc3Npb24sIGdlbklkZW50aWZpZXIpO1xubGV0IGdlblRoaXNFeHByZXNzaW9uID1cbiAgYXAoU2hpZnQuVGhpc0V4cHJlc3Npb24pO1xubGV0IGdlbkJsb2NrU3RhdGVtZW50ID1cbiAgYXAoU2hpZnQuQmxvY2tTdGF0ZW1lbnQsIGdlbkJsb2NrKTtcbmxldCBnZW5EZWJ1Z2dlclN0YXRlbWVudCA9XG4gIGFwKFNoaWZ0LkRlYnVnZ2VyU3RhdGVtZW50KTtcbmxldCBnZW5Eb1doaWxlU3RhdGVtZW50ID1cbiAgYXAoU2hpZnQuRG9XaGlsZVN0YXRlbWVudCwgZ2VuU3RhdGVtZW50LCBnZW5FeHByZXNzaW9uKTtcbmxldCBnZW5FbXB0eVN0YXRlbWVudCA9XG4gIGFwKFNoaWZ0LkVtcHR5U3RhdGVtZW50KTtcbmxldCBnZW5FeHByZXNzaW9uU3RhdGVtZW50ID1cbiAgYXAoU2hpZnQuRXhwcmVzc2lvblN0YXRlbWVudCwgZ2VuRXhwcmVzc2lvbik7XG5sZXQgZ2VuRm9ySW5TdGF0ZW1lbnQgPVxuICBhcChTaGlmdC5Gb3JJblN0YXRlbWVudCwgZShnZW5WYXJpYWJsZURlY2xhcmF0aW9uLCBnZW5FeHByZXNzaW9uKSwgZ2VuRXhwcmVzc2lvbiwgZ2VuU3RhdGVtZW50KTtcbmxldCBnZW5Gb3JTdGF0ZW1lbnQgPVxuICBhcChTaGlmdC5Gb3JTdGF0ZW1lbnQsIG9wKGUoZ2VuVmFyaWFibGVEZWNsYXJhdGlvbiwgZ2VuRXhwcmVzc2lvbikpLCBvcChnZW5FeHByZXNzaW9uKSwgb3AoZ2VuRXhwcmVzc2lvbiksIGdlblN0YXRlbWVudCk7XG5sZXQgZ2VuRnVuY3Rpb25EZWNsYXJhdGlvbiA9XG4gIGFwKFNoaWZ0LkZ1bmN0aW9uRGVjbGFyYXRpb24sIGdlbklkZW50aWZpZXIsIG1hbnkoZ2VuSWRlbnRpZmllciksIGdlbkZ1bmN0aW9uQm9keSk7XG5sZXQgZ2VuSWZTdGF0ZW1lbnQgPVxuICBhcChTaGlmdC5JZlN0YXRlbWVudCwgZ2VuRXhwcmVzc2lvbiwgZ2VuU3RhdGVtZW50LCBvcChnZW5TdGF0ZW1lbnQpKTtcbmxldCBnZW5Td2l0Y2hTdGF0ZW1lbnQgPVxuICBhcChTaGlmdC5Td2l0Y2hTdGF0ZW1lbnQsIGdlbkV4cHJlc3Npb24sIG1hbnkoZ2VuU3dpdGNoQ2FzZSkpO1xubGV0IGdlblN3aXRjaFN0YXRlbWVudFdpdGhEZWZhdWx0ID1cbiAgYXAoU2hpZnQuU3dpdGNoU3RhdGVtZW50V2l0aERlZmF1bHQsIGdlbkV4cHJlc3Npb24sIG1hbnkoZ2VuU3dpdGNoQ2FzZSksIGdlblN3aXRjaERlZmF1bHQsIG1hbnkoZ2VuU3dpdGNoQ2FzZSkpO1xubGV0IGdlblRocm93U3RhdGVtZW50ID1cbiAgYXAoU2hpZnQuVGhyb3dTdGF0ZW1lbnQsIGdlbkV4cHJlc3Npb24pO1xubGV0IGdlblRyeUNhdGNoU3RhdGVtZW50ID1cbiAgYXAoU2hpZnQuVHJ5Q2F0Y2hTdGF0ZW1lbnQsIGdlbkJsb2NrLCBnZW5DYXRjaENsYXVzZSk7XG5sZXQgZ2VuVHJ5RmluYWxseVN0YXRlbWVudCA9XG4gIGFwKFNoaWZ0LlRyeUZpbmFsbHlTdGF0ZW1lbnQsIGdlbkJsb2NrLCBvcChnZW5DYXRjaENsYXVzZSksIGdlbkJsb2NrKTtcbmxldCBnZW5WYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50ID1cbiAgYXAoU2hpZnQuVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCwgZ2VuVmFyaWFibGVEZWNsYXJhdGlvbik7XG5sZXQgZ2VuV2hpbGVTdGF0ZW1lbnQgPVxuICBhcChTaGlmdC5XaGlsZVN0YXRlbWVudCwgZ2VuRXhwcmVzc2lvbiwgZ2VuU3RhdGVtZW50KTtcbmxldCBnZW5XaXRoU3RhdGVtZW50ID1cbiAgYXAoU2hpZnQuV2l0aFN0YXRlbWVudCwgZ2VuRXhwcmVzc2lvbiwgZ2VuU3RhdGVtZW50KTtcbmxldCBnZW5TY3JpcHQgPVxuICBhcChTaGlmdC5TY3JpcHQsIGdlbkZ1bmN0aW9uQm9keSk7XG5sZXQgZ2VuRXhwcmVzc2lvbkxpc3QgPSBhbW9uZyhcbiAgZ2VuQXJyYXlFeHByZXNzaW9uLFxuICBnZW5Bc3NpZ25tZW50RXhwcmVzc2lvbixcbiAgZ2VuQmluYXJ5RXhwcmVzc2lvbixcbiAgZ2VuQ2FsbEV4cHJlc3Npb24sXG4gIGdlbkNvbXB1dGVkTWVtYmVyRXhwcmVzc2lvbixcbiAgZ2VuQ29uZGl0aW9uYWxFeHByZXNzaW9uLFxuICBnZW5GdW5jdGlvbkV4cHJlc3Npb24sXG4gIGdlbklkZW50aWZpZXJFeHByZXNzaW9uLFxuICBnZW5MaXRlcmFsQm9vbGVhbkV4cHJlc3Npb24sXG4gIGdlbkxpdGVyYWxOdWxsRXhwcmVzc2lvbixcbiAgZ2VuTGl0ZXJhbE51bWVyaWNFeHByZXNzaW9uLFxuICBnZW5MaXRlcmFsSW5maW5pdHlFeHByZXNzaW9uLFxuICBnZW5MaXRlcmFsUmVnRXhwRXhwcmVzc2lvbixcbiAgZ2VuTGl0ZXJhbFN0cmluZ0V4cHJlc3Npb24sXG4gIGdlbk5ld0V4cHJlc3Npb24sXG4gIGdlbk9iamVjdEV4cHJlc3Npb24sXG4gIGdlblBvc3RmaXhFeHByZXNzaW9uLFxuICBnZW5QcmVmaXhFeHByZXNzaW9uLFxuICBnZW5TdGF0aWNNZW1iZXJFeHByZXNzaW9uLFxuICBnZW5UaGlzRXhwcmVzc2lvbik7XG5sZXQgZ2VuWmVyb0xlbmd0aEV4cHJlc3Npb25MaXN0ID0gYW1vbmcoXG4gIGdlbkFycmF5RXhwcmVzc2lvbixcbiAgZ2VuSWRlbnRpZmllckV4cHJlc3Npb24sXG4gIGdlbkxpdGVyYWxCb29sZWFuRXhwcmVzc2lvbixcbiAgZ2VuTGl0ZXJhbE51bGxFeHByZXNzaW9uLFxuICBnZW5MaXRlcmFsTnVtZXJpY0V4cHJlc3Npb24sXG4gIGdlbkxpdGVyYWxJbmZpbml0eUV4cHJlc3Npb24sXG4gIGdlbkxpdGVyYWxSZWdFeHBFeHByZXNzaW9uLFxuICBnZW5MaXRlcmFsU3RyaW5nRXhwcmVzc2lvbixcbiAgZ2VuVGhpc0V4cHJlc3Npb24pO1xubGV0IGdlbkRpcmVjdGl2ZUxpc3QgPSBhbW9uZyhcbiAgZ2VuVW5rbm93bkRpcmVjdGl2ZSxcbiAgZ2VuVXNlU3RyaWN0RGlyZWN0aXZlKTtcbmxldCBnZW5TdGF0ZW1lbnRMaXN0ID0gYW1vbmcoXG4gIGdlbkJsb2NrU3RhdGVtZW50LFxuICBnZW5EZWJ1Z2dlclN0YXRlbWVudCxcbiAgZ2VuRG9XaGlsZVN0YXRlbWVudCxcbiAgZ2VuRW1wdHlTdGF0ZW1lbnQsXG4gIGdlbkV4cHJlc3Npb25TdGF0ZW1lbnQsXG4gIGdlbkZvckluU3RhdGVtZW50LFxuICBnZW5Gb3JTdGF0ZW1lbnQsXG4gIGdlbkZ1bmN0aW9uRGVjbGFyYXRpb24sXG4gIGdlbklmU3RhdGVtZW50LFxuICBnZW5Td2l0Y2hTdGF0ZW1lbnQsXG4gIGdlblN3aXRjaFN0YXRlbWVudFdpdGhEZWZhdWx0LFxuICBnZW5UaHJvd1N0YXRlbWVudCxcbiAgZ2VuVHJ5Q2F0Y2hTdGF0ZW1lbnQsXG4gIGdlblRyeUZpbmFsbHlTdGF0ZW1lbnQsXG4gIGdlblZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQsXG4gIGdlbldoaWxlU3RhdGVtZW50LFxuICBnZW5XaXRoU3RhdGVtZW50KTtcblxuZnVuY3Rpb24gZ2VuRXhwcmVzc2lvbihyYW5kb20sIGRlcHRoKSB7XG4gIHJldHVybiAoZGVwdGggPD0gMCA/IGdlblplcm9MZW5ndGhFeHByZXNzaW9uTGlzdCA6IGdlbkV4cHJlc3Npb25MaXN0KShyYW5kb20sIGRlcHRoKTtcbn1cblxuZnVuY3Rpb24gZ2VuRGlyZWN0aXZlKHJhbmRvbSwgZGVwdGgpIHtcbiAgcmV0dXJuIGdlbkRpcmVjdGl2ZUxpc3QocmFuZG9tLCBkZXB0aCk7XG59XG5cbmZ1bmN0aW9uIGdlblN0YXRlbWVudChyYW5kb20sIGRlcHRoKSB7XG4gIHJldHVybiBnZW5TdGF0ZW1lbnRMaXN0KHJhbmRvbSwgZGVwdGgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUcmVlKHJuZywgZGVwdGgpIHtcbiAgbGV0IHIgPSBuZXcgUihybmcpO1xuICBkbyB7XG4gICAgbGV0IHRyZWUgPSBnZW5TY3JpcHQociwgZGVwdGgpO1xuICAgIGlmIChpc1ZhbGlkKHRyZWUpKSB7XG4gICAgICByZXR1cm4gdHJlZTtcbiAgICB9XG4gIH0gd2hpbGUgKHRydWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGUocm5nLCBkZXB0aCkge1xuICByZXR1cm4gY29kZUdlbihnZW5lcmF0ZVRyZWUocm5nLCBkZXB0aCkpO1xufVxuIl19